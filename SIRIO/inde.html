<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SIRIO - Assistente ITIS Olografico</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=Space+Grotesk:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script type="importmap">
    {
        "imports": {
            "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
            "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
        }
    }
    </script>
    <style>
        :root {
            --bg-primary: #0a0e1a;
            --bg-secondary: #0f1629;
            --fg: #e8f0ff;
            --muted: #6b7fa8;
            --accent-blue: #00d4ff;
            --accent-gold: #ffd700;
            --card: rgba(15, 25, 50, 0.7);
            --border: rgba(0, 212, 255, 0.2);
            --glow-blue: rgba(0, 212, 255, 0.4);
            --glow-gold: rgba(255, 215, 0, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Space Grotesk', sans-serif;
            background: var(--bg-primary);
            color: var(--fg);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .font-display {
            font-family: 'Orbitron', sans-serif;
        }

        /* Scan lines overlay */
        .scan-lines::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: repeating-linear-gradient(0deg,
                    transparent,
                    transparent 2px,
                    rgba(0, 212, 255, 0.015) 2px,
                    rgba(0, 212, 255, 0.015) 4px);
            pointer-events: none;
            z-index: 1000;
        }

        /* Holographic shimmer */
        @keyframes holoShimmer {

            0%,
            100% {
                opacity: 0.8;
            }

            50% {
                opacity: 1;
            }
        }

        @keyframes pulse {

            0%,
            100% {
                transform: scale(1);
                opacity: 0.6;
            }

            50% {
                transform: scale(1.05);
                opacity: 1;
            }
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0px);
            }

            50% {
                transform: translateY(-10px);
            }
        }

        @keyframes glitch {

            0%,
            90%,
            100% {
                transform: translateX(0);
            }

            92% {
                transform: translateX(-2px);
            }

            94% {
                transform: translateX(2px);
            }

            96% {
                transform: translateX(-1px);
            }

            98% {
                transform: translateX(1px);
            }
        }

        @keyframes typing {
            from {
                width: 0;
            }

            to {
                width: 100%;
            }
        }

        @keyframes blink {

            0%,
            50% {
                border-color: var(--accent-blue);
            }

            51%,
            100% {
                border-color: transparent;
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-50px);
            }

            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .animate-fadeInUp {
            animation: fadeInUp 0.8s ease-out forwards;
        }

        .animate-slideInLeft {
            animation: slideInLeft 0.6s ease-out forwards;
        }

        .animate-float {
            animation: float 4s ease-in-out infinite;
        }

        .animate-pulse-slow {
            animation: pulse 3s ease-in-out infinite;
        }

        .animate-glitch {
            animation: glitch 3s ease-in-out infinite;
        }

        /* Hologram container */
        #holo-container {
            position: relative;
            width: 100%;
            height: 400px;
        }

        #holo-container canvas {
            width: 100% !important;
            height: 100% !important;
        }

        /* Glow effects */
        .glow-blue {
            box-shadow: 0 0 20px var(--glow-blue), 0 0 40px rgba(0, 212, 255, 0.2);
        }

        .glow-gold {
            box-shadow: 0 0 20px var(--glow-gold), 0 0 40px rgba(255, 215, 0, 0.15);
        }

        .text-glow-blue {
            text-shadow: 0 0 10px var(--accent-blue), 0 0 20px rgba(0, 212, 255, 0.3);
        }

        .text-glow-gold {
            text-shadow: 0 0 10px var(--accent-gold), 0 0 20px rgba(255, 215, 0, 0.3);
        }

        /* Card hover effects */
        .holo-card {
            background: linear-gradient(135deg, rgba(15, 25, 50, 0.9) 0%, rgba(20, 35, 70, 0.7) 100%);
            border: 1px solid var(--border);
            backdrop-filter: blur(10px);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .holo-card:hover {
            border-color: var(--accent-blue);
            transform: translateY(-5px);
            box-shadow: 0 10px 40px rgba(0, 212, 255, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        /* Chat styles */
        .chat-container {
            background: linear-gradient(180deg, rgba(10, 14, 26, 0.95) 0%, rgba(15, 22, 41, 0.95) 100%);
            border: 1px solid var(--border);
        }

        .chat-message {
            animation: fadeInUp 0.3s ease-out;
        }

        .chat-input:focus {
            outline: none;
            border-color: var(--accent-blue);
            box-shadow: 0 0 0 3px rgba(0, 212, 255, 0.1);
        }

        /* Button styles */
        .btn-primary {
            background: linear-gradient(135deg, var(--accent-blue) 0%, #0099cc 100%);
            color: var(--bg-primary);
            font-weight: 600;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .btn-primary::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s ease;
        }

        .btn-primary:hover::before {
            left: 100%;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0, 212, 255, 0.4);
        }

        .btn-secondary {
            background: transparent;
            border: 1px solid var(--accent-gold);
            color: var(--accent-gold);
            transition: all 0.3s ease;
        }

        .btn-secondary:hover {
            background: rgba(255, 215, 0, 0.1);
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.2);
        }

        /* Quiz modal */
        .modal-overlay {
            background: rgba(10, 14, 26, 0.9);
            backdrop-filter: blur(10px);
        }

        .modal-content {
            background: linear-gradient(135deg, rgba(15, 25, 50, 0.98) 0%, rgba(20, 35, 70, 0.95) 100%);
            border: 1px solid var(--accent-blue);
            animation: fadeInUp 0.4s ease-out;
        }

        /* Particles background */
        #particles-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        /* Navigation */
        .nav-link {
            position: relative;
            transition: color 0.3s ease;
        }

        .nav-link::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--accent-blue);
            transition: width 0.3s ease;
        }

        .nav-link:hover::after {
            width: 100%;
        }

        /* Subject cards */
        .subject-card {
            position: relative;
            overflow: hidden;
        }

        .subject-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: linear-gradient(180deg, var(--accent-blue) 0%, var(--accent-gold) 100%);
            transform: scaleY(0);
            transform-origin: bottom;
            transition: transform 0.4s ease;
        }

        .subject-card:hover::before {
            transform: scaleY(1);
        }

        /* Status indicator */
        .status-dot {
            width: 8px;
            height: 8px;
            background: #00ff88;
            border-radius: 50%;
            animation: pulse 2s ease-in-out infinite;
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-secondary);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--accent-blue);
            border-radius: 3px;
        }

        /* Reduced motion */
        @media (prefers-reduced-motion: reduce) {

            *,
            *::before,
            *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        /* Responsive */
        @media (max-width: 768px) {
            #holo-container {
                height: 300px;
            }
        }
    </style>
</head>

<body class="scan-lines">
    <!-- Particles Background -->
    <canvas id="particles-bg"></canvas>

    <!-- Navigation -->
    <nav class="fixed top-0 left-0 right-0 z-50 bg-opacity-80 backdrop-blur-lg"
        style="background: rgba(10, 14, 26, 0.8);">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center gap-3">
                    <!-- Logo scuola -->
                    <img src="img-vid/logo.png" alt="Logo ISISS" class="w-10 h-10 rounded-lg object-contain glow-blue">

                    <!-- Nome AI -->
                    <span class="font-display font-bold text-xl tracking-wider">SIRIO</span>
                </div>
                <div class="hidden md:flex items-center gap-8">
                    <a href="#chat" class="nav-link text-sm font-medium text-gray-300 hover:text-white">Chat</a>
                    <a href="#indirizzi"
                        class="nav-link text-sm font-medium text-gray-300 hover:text-white">Indirizzi</a>
                    <a href="#progetti" class="nav-link text-sm font-medium text-gray-300 hover:text-white">Progetti</a>
                    <a href="#servizi" class="nav-link text-sm font-medium text-gray-300 hover:text-white">Servizi</a>
                </div>
                <div class="flex items-center gap-2">
                    <div class="status-dot"></div>
                    <span class="text-xs text-green-400 font-medium">ONLINE</span>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="pt-24 pb-8 relative">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid lg:grid-cols-2 gap-8 items-center">
                <!-- Text Content -->
                <div class="order-2 lg:order-1 text-center lg:text-left">
                    <div
                        class="inline-flex items-center gap-2 px-4 py-2 rounded-full border border-cyan-500/30 bg-cyan-500/10 mb-6">
                        <span class="w-2 h-2 bg-cyan-400 rounded-full animate-pulse"></span>
                        <span class="text-cyan-400 text-sm font-medium">Assistente ITIS Olografico</span>
                    </div>
                    <h1 class="font-display text-4xl sm:text-5xl lg:text-6xl font-black mb-4 leading-tight">
                        <span class="text-white">Ciao, sono</span><br>
                        <span class="text-glow-blue" style="color: var(--accent-blue);">SIRIO</span>
                    </h1>
                    <p class="text-lg sm:text-xl text-gray-400 mb-8 max-w-lg mx-auto lg:mx-0">
                        La tua guida intelligente per scoprire il mondo dell'ITIS. Ti aiuterò a scegliere il percorso
                        perfetto per te.
                    </p>
                    <div class="flex flex-col sm:flex-row gap-4 justify-center lg:justify-start">
                        <button onclick="openQuiz()"
                            class="btn-primary px-8 py-4 rounded-xl font-display text-sm tracking-wide">
                            Scopri il tuo indirizzo
                        </button>
                        <button onclick="scrollToChat()"
                            class="btn-secondary px-8 py-4 rounded-xl font-display text-sm tracking-wide">
                            Inizia a chattare
                        </button>
                    </div>
                </div>
                <!-- Hologram Avatar -->
                <div class="order-1 lg:order-2">
                    <div id="holo-container" class="relative">
                        <!-- Avatar status -->
                        <div class="absolute bottom-4 left-1/2 transform -translate-x-1/2 z-10">
                            <div
                                class="flex items-center gap-2 px-4 py-2 rounded-full bg-black/50 border border-cyan-500/30">
                                <div class="w-3 h-3 bg-green-400 rounded-full animate-pulse"></div>
                                <span class="text-sm font-medium text-cyan-400">Pronto ad aiutarti</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Chat Section -->
    <section id="chat" class="py-16 relative">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-10">
                <h2 class="font-display text-3xl sm:text-4xl font-bold mb-4">Parla con Sirio</h2>
                <p class="text-gray-400 max-w-2xl mx-auto">Fammi qualsiasi domanda sulla scuola, gli indirizzi, i
                    progetti o i servizi. Sono qui per guidarti!</p>
            </div>

            <div class="chat-container rounded-2xl overflow-hidden glow-blue">
                <!-- Chat Header -->
                <div class="px-6 py-4 border-b border-cyan-500/20 flex items-center justify-between">
                    <div class="flex items-center gap-3">
                        <div class="w-10 h-10 rounded-full bg-white flex items-center justify-center p-1 glow-blue">
                            <img src="img-vid/logo.png" class="w-full h-full object-contain rounded-full">
                        </div>
                        <div>
                            <h3 class="font-display font-bold text-sm">SIRIO</h3>
                            <div class="flex items-center gap-1">
                                <div class="w-2 h-2 bg-green-400 rounded-full"></div>
                                <span class="text-xs text-gray-400">Online ora</span>
                            </div>
                        </div>
                    </div>
                    <button onclick="clearChat()" class="text-gray-400 hover:text-white transition-colors">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16">
                            </path>
                        </svg>
                    </button>
                </div>

                <!-- Chat Messages -->
                <div id="chat-messages" class="h-80 overflow-y-auto p-6 space-y-4">
                    <!-- Initial message -->
                    <div class="chat-message flex gap-3">
                        <div
                            class="w-8 h-8 rounded-full bg-gradient-to-br from-cyan-400 to-blue-600 flex-shrink-0 flex items-center justify-center">
                            <span class="font-display font-bold text-xs text-white">S</span>
                        </div>
                        <div class="flex-1">
                            <div
                                class="bg-cyan-500/10 border border-cyan-500/20 rounded-2xl rounded-tl-none px-4 py-3 max-w-md">
                                <p class="text-sm text-gray-200">Ciao! Sono Sirio, l’assistente olografico dell’ITIS di
                                    Piedimonte Matese.
                                    Il nostro istituto tecnico forma studenti nelle tecnologie del futuro attraverso
                                    laboratori, progetti e innovazione.
                                    Posso aiutarti a scoprire indirizzi, progetti, open day e opportunità.
                                    Cosa vuoi sapere?
                                </p>
                            </div>
                            <span class="text-xs text-gray-500 mt-1 block">Ora</span>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="px-6 py-3 border-t border-cyan-500/10">
                    <div class="flex flex-wrap gap-2">
                        <button onclick="sendQuickMessage('Quali indirizzi ci sono?')"
                            class="text-xs px-3 py-1.5 rounded-full border border-cyan-500/30 text-cyan-400 hover:bg-cyan-500/10 transition-colors">
                            Quali indirizzi ci sono?
                        </button>
                        <button onclick="sendQuickMessage('Quando scade l\'iscrizione?')"
                            class="text-xs px-3 py-1.5 rounded-full border border-cyan-500/30 text-cyan-400 hover:bg-cyan-500/10 transition-colors">
                            Iscrizioni
                        </button>
                        <button onclick="sendQuickMessage('Parlami dei progetti')"
                            class="text-xs px-3 py-1.5 rounded-full border border-cyan-500/30 text-cyan-400 hover:bg-cyan-500/10 transition-colors">
                            Progetti
                        </button>
                        <button onclick="openQuiz()"
                            class="text-xs px-3 py-1.5 rounded-full border border-yellow-500/30 text-yellow-400 hover:bg-yellow-500/10 transition-colors">
                            Quiz orientamento
                        </button>
                    </div>
                </div>

                <!-- Chat Input -->
                <div class="p-4 border-t border-cyan-500/20">
                    <form onsubmit="sendMessage(event)" class="flex gap-3">
                        <input type="text" id="chat-input"
                            class="chat-input flex-1 bg-white/5 border border-cyan-500/20 rounded-xl px-4 py-3 text-sm text-white placeholder-gray-500 transition-all"
                            placeholder="Scrivi il tuo messaggio..." autocomplete="off">
                        <button type="submit" class="btn-primary px-6 py-3 rounded-xl font-medium text-sm">
                            Invia
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <!-- Indirizzi Section -->
    <section id="indirizzi" class="py-16 relative">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <h2 class="font-display text-3xl sm:text-4xl font-bold mb-4">I Nostri Indirizzi</h2>
                <p class="text-gray-400 max-w-2xl mx-auto">Scopri i percorsi di studio del triennio e trova quello
                    perfetto per te</p>
            </div>

            <div class="grid md:grid-cols-3 gap-6">
                <!-- Informatica -->
                <div class="holo-card subject-card rounded-2xl p-6 opacity-0" data-reveal>
                    <div class="w-12 h-12 rounded-xl bg-cyan-500/20 flex items-center justify-center mb-4">
                        <svg class="w-6 h-6 text-cyan-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path>
                        </svg>
                    </div>
                    <h3 class="font-display text-xl font-bold mb-2 text-cyan-400">Informatica</h3>
                    <p class="text-sm text-gray-400 mb-4">Impara a "parlare" con i computer. Crea software, app e siti
                        web.</p>
                    <div class="space-y-2 mb-4">
                        <div class="flex items-center gap-2 text-xs text-gray-300">
                            <span class="w-1.5 h-1.5 bg-cyan-400 rounded-full"></span>
                            Programmazione (Python, Java, Web)
                        </div>
                        <div class="flex items-center gap-2 text-xs text-gray-300">
                            <span class="w-1.5 h-1.5 bg-cyan-400 rounded-full"></span>
                            Cybersecurity di base
                        </div>
                        <div class="flex items-center gap-2 text-xs text-gray-300">
                            <span class="w-1.5 h-1.5 bg-cyan-400 rounded-full"></span>
                            Sviluppo App e Siti Web
                        </div>
                    </div>
                    <div class="pt-4 border-t border-cyan-500/20">
                        <p class="text-xs text-gray-500 mb-2">Sbocchi lavorativi:</p>
                        <p class="text-xs text-gray-300">Sviluppatore, Web Designer, Sistemista, Ethical Hacker</p>
                    </div>
                </div>

                <!-- Elettronica -->
                <div class="holo-card subject-card rounded-2xl p-6 opacity-0" data-reveal>
                    <div class="w-12 h-12 rounded-xl bg-yellow-500/20 flex items-center justify-center mb-4">
                        <svg class="w-6 h-6 text-yellow-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                        </svg>
                    </div>
                    <h3 class="font-display text-xl font-bold mb-2 text-yellow-400">Elettronica</h3>
                    <p class="text-sm text-gray-400 mb-4">Circuiti e chip. Far funzionare oggetti "smart" e sistemi
                        automatizzati.</p>
                    <div class="space-y-2 mb-4">
                        <div class="flex items-center gap-2 text-xs text-gray-300">
                            <span class="w-1.5 h-1.5 bg-yellow-400 rounded-full"></span>
                            Circuiti e Sistemi Elettronici
                        </div>
                        <div class="flex items-center gap-2 text-xs text-gray-300">
                            <span class="w-1.5 h-1.5 bg-yellow-400 rounded-full"></span>
                            Telecomunicazioni (5G, WiFi, Fibra)
                        </div>
                        <div class="flex items-center gap-2 text-xs text-gray-300">
                            <span class="w-1.5 h-1.5 bg-yellow-400 rounded-full"></span>
                            Robotica e Automazione
                        </div>
                    </div>
                    <div class="pt-4 border-t border-yellow-500/20">
                        <p class="text-xs text-gray-500 mb-2">Sbocchi lavorativi:</p>
                        <p class="text-xs text-gray-300">Tecnico Elettronico, Progettista Circuiti, Manutentore</p>
                    </div>
                </div>

                <!-- Meccanica -->
                <div class="holo-card subject-card rounded-2xl p-6 opacity-0" data-reveal>
                    <div class="w-12 h-12 rounded-xl bg-emerald-500/20 flex items-center justify-center mb-4">
                        <svg class="w-6 h-6 text-emerald-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z">
                            </path>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                        </svg>
                    </div>
                    <h3 class="font-display text-xl font-bold mb-2 text-emerald-400">Meccanica</h3>
                    <p class="text-sm text-gray-400 mb-4">Studio delle macchine, motori e produzione con tecnologie
                        avanzate.</p>
                    <div class="space-y-2 mb-4">
                        <div class="flex items-center gap-2 text-xs text-gray-300">
                            <span class="w-1.5 h-1.5 bg-emerald-400 rounded-full"></span>
                            Macchine e Motori
                        </div>
                        <div class="flex items-center gap-2 text-xs text-gray-300">
                            <span class="w-1.5 h-1.5 bg-emerald-400 rounded-full"></span>
                            Disegno 3D (CAD)
                        </div>
                        <div class="flex items-center gap-2 text-xs text-gray-300">
                            <span class="w-1.5 h-1.5 bg-emerald-400 rounded-full"></span>
                            Stampa 3D e Produzione
                        </div>
                    </div>
                    <div class="pt-4 border-t border-emerald-500/20">
                        <p class="text-xs text-gray-500 mb-2">Sbocchi lavorativi:</p>
                        <p class="text-xs text-gray-300">Disegnatore CAD, Tecnico Manutenzione, Ingegnere Meccanico</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Progetti Section -->
    <section id="progetti" class="py-16 relative">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <h2 class="font-display text-3xl sm:text-4xl font-bold mb-4">Progetti in Vetrina</h2>
                <p class="text-gray-400 max-w-2xl mx-auto">Scopri i progetti realizzati dai nostri studenti per l'Open
                    Day</p>
            </div>

            <div class="grid md:grid-cols-3 gap-6">
                <!-- Progetto 1 -->
                <div class="holo-card rounded-2xl overflow-hidden opacity-0" data-reveal>
                    <div
                        class="h-40 bg-gradient-to-br from-cyan-500/20 to-blue-600/20 flex items-center justify-center relative">
                        <div class="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"></div>
                        <svg class="w-16 h-16 text-cyan-400 opacity-50" fill="none" stroke="currentColor"
                            viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1"
                                d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10">
                            </path>
                        </svg>
                        <div class="absolute top-4 left-4">
                            <span
                                class="px-2 py-1 text-xs font-medium bg-cyan-500/30 text-cyan-300 rounded-full">Elettronica</span>
                        </div>
                    </div>
                    <div class="p-6">
                        <h3 class="font-display text-lg font-bold mb-2">La Fabbrica Smart</h3>
                        <p class="text-sm text-gray-400 mb-4">Un nastro trasportatore controllato da PLC che riconosce i
                            colori degli oggetti e li smista automaticamente.</p>
                        <div class="flex items-center gap-2 text-xs text-gray-500">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z">
                                </path>
                            </svg>
                            Classe 5AE - Anno 2024
                        </div>
                    </div>
                </div>

                <!-- Progetto 2 -->
                <div class="holo-card rounded-2xl overflow-hidden opacity-0" data-reveal>
                    <div
                        class="h-40 bg-gradient-to-br from-yellow-500/20 to-orange-600/20 flex items-center justify-center relative">
                        <div class="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"></div>
                        <svg class="w-16 h-16 text-yellow-400 opacity-50" fill="none" stroke="currentColor"
                            viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1"
                                d="M7 11.5V14m0-2.5v-6a1.5 1.5 0 113 0m-3 6a1.5 1.5 0 00-3 0v2a7.5 7.5 0 0015 0v-5a1.5 1.5 0 00-3 0m-6-3V11m0-5.5v-1a1.5 1.5 0 013 0v1m0 0V11m0-5.5a1.5 1.5 0 013 0v3m0 0V11">
                            </path>
                        </svg>
                        <div class="absolute top-4 left-4">
                            <span
                                class="px-2 py-1 text-xs font-medium bg-yellow-500/30 text-yellow-300 rounded-full">Meccanica</span>
                        </div>
                    </div>
                    <div class="p-6">
                        <h3 class="font-display text-lg font-bold mb-2">Robo-Arm</h3>
                        <p class="text-sm text-gray-400 mb-4">Un braccio robotico che disegna o sposta oggetti,
                            comandato da un joystick costruito dagli studenti.</p>
                        <div class="flex items-center gap-2 text-xs text-gray-500">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z">
                                </path>
                            </svg>
                            Classe 5BM - Anno 2024
                        </div>
                    </div>
                </div>

                <!-- Progetto 3 -->
                <div class="holo-card rounded-2xl overflow-hidden opacity-0" data-reveal>
                    <div
                        class="h-40 bg-gradient-to-br from-emerald-500/20 to-teal-600/20 flex items-center justify-center relative">
                        <div class="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"></div>
                        <svg class="w-16 h-16 text-emerald-400 opacity-50" fill="none" stroke="currentColor"
                            viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1"
                                d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6">
                            </path>
                        </svg>
                        <div class="absolute top-4 left-4">
                            <span
                                class="px-2 py-1 text-xs font-medium bg-emerald-500/30 text-emerald-300 rounded-full">Informatica</span>
                        </div>
                    </div>
                    <div class="p-6">
                        <h3 class="font-display text-lg font-bold mb-2">SafeHome</h3>
                        <p class="text-sm text-gray-400 mb-4">Una casa domotica simulata dove luci e tapparelle si
                            controllano con comandi vocali o app.</p>
                        <div class="flex items-center gap-2 text-xs text-gray-500">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z">
                                </path>
                            </svg>
                            Classe 5AI - Anno 2024
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Servizi Section -->
    <section id="servizi" class="py-16 relative">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <h2 class="font-display text-3xl sm:text-4xl font-bold mb-4">Servizi Utili</h2>
                <p class="text-gray-400 max-w-2xl mx-auto">Tutte le informazioni pratiche per studenti e genitori</p>
            </div>

            <div class="grid sm:grid-cols-2 lg:grid-cols-4 gap-4">
                <div class="holo-card rounded-xl p-5 opacity-0" data-reveal onclick="showServiceInfo('iscrizioni')">
                    <div class="flex items-center gap-3 mb-3">
                        <div class="w-10 h-10 rounded-lg bg-cyan-500/20 flex items-center justify-center">
                            <svg class="w-5 h-5 text-cyan-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z">
                                </path>
                            </svg>
                        </div>
                        <h3 class="font-display font-bold text-sm">Iscrizioni</h3>
                    </div>
                    <p class="text-xs text-gray-400">Scadenze e moduli per l'iscrizione</p>
                </div>

                <div class="holo-card rounded-xl p-5 opacity-0" data-reveal onclick="showServiceInfo('orari')">
                    <div class="flex items-center gap-3 mb-3">
                        <div class="w-10 h-10 rounded-lg bg-yellow-500/20 flex items-center justify-center">
                            <svg class="w-5 h-5 text-yellow-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                        <h3 class="font-display font-bold text-sm">Orari</h3>
                    </div>
                    <p class="text-xs text-gray-400">Orario delle lezioni e segreteria</p>
                </div>

                <div class="holo-card rounded-xl p-5 opacity-0" data-reveal onclick="showServiceInfo('laboratori')">
                    <div class="flex items-center gap-3 mb-3">
                        <div class="w-10 h-10 rounded-lg bg-emerald-500/20 flex items-center justify-center">
                            <svg class="w-5 h-5 text-emerald-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4">
                                </path>
                            </svg>
                        </div>
                        <h3 class="font-display font-bold text-sm">Laboratori</h3>
                    </div>
                    <p class="text-xs text-gray-400">Mappa e orari laboratori</p>
                </div>

                <div class="holo-card rounded-xl p-5 opacity-0" data-reveal onclick="showServiceInfo('contatti')">
                    <div class="flex items-center gap-3 mb-3">
                        <div class="w-10 h-10 rounded-lg bg-pink-500/20 flex items-center justify-center">
                            <svg class="w-5 h-5 text-pink-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z">
                                </path>
                            </svg>
                        </div>
                        <h3 class="font-display font-bold text-sm">Contatti</h3>
                    </div>
                    <p class="text-xs text-gray-400">Email, telefono e segreteria</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="py-8 border-t border-cyan-500/10">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <div class="flex items-center justify-center gap-3 mb-4">
                <div
                    class="w-8 h-8 rounded-lg bg-gradient-to-br from-cyan-400 to-blue-600 flex items-center justify-center">
                    <span class="font-display font-bold text-sm text-white">S</span>
                </div>
                <span class="font-display font-bold tracking-wider">SIRIO</span>
            </div>
            <p class="text-xs text-gray-500">Assistente ITIS Olografico - Progetto Studentesco 2024</p>
        </div>
    </footer>

    <!-- Quiz Modal -->
    <div id="quiz-modal" class="fixed inset-0 z-50 hidden">
        <div class="modal-overlay absolute inset-0" onclick="closeQuiz()"></div>
        <div
            class="modal-content absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full max-w-lg rounded-2xl p-6 mx-4">
            <div class="flex items-center justify-between mb-6">
                <h3 class="font-display text-xl font-bold">Quiz Orientamento</h3>
                <button onclick="closeQuiz()" class="text-gray-400 hover:text-white transition-colors">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12">
                        </path>
                    </svg>
                </button>
            </div>
            <div id="quiz-content">
                <!-- Quiz steps will be rendered here -->
            </div>
        </div>
    </div>

    <!-- Service Info Modal -->
    <div id="service-modal" class="fixed inset-0 z-50 hidden">
        <div class="modal-overlay absolute inset-0" onclick="closeServiceModal()"></div>
        <div
            class="modal-content absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full max-w-lg rounded-2xl p-6 mx-4">
            <div class="flex items-center justify-between mb-4">
                <h3 id="service-title" class="font-display text-xl font-bold"></h3>
                <button onclick="closeServiceModal()" class="text-gray-400 hover:text-white transition-colors">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12">
                        </path>
                    </svg>
                </button>
            </div>
            <div id="service-content" class="text-sm text-gray-300 space-y-3">
                <!-- Service info will be rendered here -->
            </div>
        </div>
    </div>

    <script type="module">
        import * as THREE from 'three';

        // ==================== DATA ====================
        const knowledgeBase = {
            indirizzi: {
                informatica: {
                    nome: "Informatica",
                    descrizione: "Imparerai a 'parlare' con i computer. Si crea software, app e siti web.",
                    materie: ["Informatica", "Sistemi e Reti", "Gestione Progetto"],
                    competenze: ["Programmazione (Python, Java, Web)", "Cybersecurity di base", "Sviluppo App e Siti Web"],
                    lavoro: ["Sviluppatore", "Web Designer", "Sistemista", "Ethical Hacker"]
                },
                elettronica: {
                    nome: "Elettronica",
                    descrizione: "Circuiti e chip. Far funzionare oggetti 'smart'.",
                    materie: ["Elettronica", "Telecomunicazioni", "Sistemi Automatici"],
                    competenze: ["Circuiti e Sistemi Elettronici", "Telecomunicazioni (5G, WiFi, Fibra)", "Robotica e Automazione"],
                    lavoro: ["Tecnico Elettronico", "Progettista Circuiti", "Manutentore di impianti"]
                },
                meccanica: {
                    nome: "Meccanica",
                    descrizione: "Studio delle macchine e dei motori.",
                    materie: ["Meccanica Applicata", "Tecnologie Meccaniche"],
                    competenze: ["Macchine e Motori", "Disegno 3D (CAD)", "Stampa 3D e Produzione"],
                    lavoro: ["Disegnatore CAD", "Tecnico Manutenzione", "Ingegneria Meccanica"]
                },

                costruzioni: {
                    nome: "Costruzioni, Ambiente e Territorio",
                    descrizione: "Imparerai progettazione edilizia, topografia, sicurezza nei cantieri e uso di software CAD.",
                    competenze: [
                        "Disegno tecnico e CAD",
                        "Topografia",
                        "Progettazione edilizia",
                        "Sicurezza nei cantieri",
                        "Gestione territorio"
                    ]
                }
            },
            progetti: [
                { nome: "La Fabbrica Smart", area: "Elettronica/Automazione", descrizione: "Un nastro trasportatore controllato da un PLC che riconosce i colori degli oggetti." },
                { nome: "Robo-Arm", area: "Meccanica/Informatica", descrizione: "Un braccio robotico che disegna o sposta oggetti, comandato da un Joystick costruito dagli studenti." },
                { nome: "SafeHome", area: "Informatica/Elettronica", descrizione: "Una casa domotica simulata dove luci e tapparelle si accendono con comandi vocali o app." }
            ],
            servizi: {
                iscrizioni: {
                    titolo: "Iscrizioni",
                    info: [
                        "Il modulo per l'anno prossimo va consegnato entro il 30 Gennaio.",
                        "È possibile scaricare il modulo dal sito della scuola o ritirarlo in segreteria.",
                        "Per le iscrizioni online, visitare il portale ministeriale.",
                        "Per informazioni chiamare la segreteria dalle 10:00 alle 13:00."
                    ]
                },
                orari: {
                    titolo: "Orari",
                    info: [
                        "Lezioni: 8:00 - 13:30  /  8:00 - 13:50 ",
                        "Segreteria: 10:00 - 13:00 | 15:00 - 17:00",
                        "Ricevimento docenti: su appuntamento",

                    ]
                },
                laboratori: {
                    titolo: "Laboratori",
                    info: [
                        "Lab. Informatica - Piano 1, Ala Est",
                        "Lab. Elettronica - Piano -1, Ala Ovest",
                        "Lab. Meccanica - Piano -1, Ala Sud",
                        "Lab. Chimica - Piano -1, Ala Ovest",
                        "I laboratori sono accessibili con prenotazione tramite i docenti."
                    ]
                },
                contatti: {
                    titolo: "Contatti",
                    info: [
                        "Email: segreteria@itis.edu.it",
                        "Telefono: 06 12345678",
                        "PEC: itis@pec.istruzione.it",
                        "Indirizzo: Via della Tecnica 1, Roma",
                        "Sito web: www.itis.edu.it"
                    ]
                }
            }
        };

        const quizQuestions = [
            {
                domanda: "Cosa ti piace fare di più nel tempo libero?",
                opzioni: [
                    { testo: "Smontare e riparare oggetti", valore: "meccanica" },
                    { testo: "Giocare ai videogiochi o usare app", valore: "informatica" },
                    { testo: "Costruire cose con elettronica/fili", valore: "elettronica" }
                ]
            },
            {
                domanda: "Quale materia ti appassiona di più?",
                opzioni: [
                    { testo: "Matematica e logica", valore: "informatica" },
                    { testo: "Fisica e scienze", valore: "elettronica" },
                    { testo: "Disegno tecnico e tecnologia", valore: "meccanica" }
                ]
            },
            {
                domanda: "Cosa vorresti creare in futuro?",
                opzioni: [
                    { testo: "App, siti web o videogiochi", valore: "informatica" },
                    { testo: "Robot o dispositivi smart", valore: "elettronica" },
                    { testo: "Macchine, motori o prototipi 3D", valore: "meccanica" }
                ]
            }
        ];

        // ==================== CHAT SYSTEM ====================
        let chatHistory = [];

        function findBestResponse(message) {
            const msg = message.toLowerCase();

            if (msg.includes('indirizz') || msg.includes('corso') || msg.includes('materia')) {
                return {
                    text: "Abbiamo quattro indirizzi principali: Informatica (programmazione e ai), Elettronica (circuiti e automazione) Meccanica (macchine e CAD) e Edilizzia (Progerttazione). Quale ti interessa approfondire?",
                    suggestions: ["Informatica", "Elettronica", "Meccanica", "Edilizia"]
                };
            }

            if (msg.includes('informatica') || msg.includes('programmazione') || msg.includes('codice') || msg.includes('videogiochi')) {
                return {
                    text: `L'indirizzo Informatica è perfetto per te! Imparerai a programmare in Python, Java e a creare siti web. Molti nostri studenti scoprono che creare videogiochi è più bello che giocarci! Vuoi vedere il progetto "SafeHome" di domotica?`,
                    suggestions: ["Voglio vedere i progetti", "Quali lavori posso fare?"]
                };
            }

            if (msg.includes('elettronic') || msg.includes('circuit') || msg.includes('robot')) {
                return {
                    text: "L'Elettronica è affascinante! Imparerai a progettare circuiti, a lavorare con Arduino e a creare sistemi automatizzati. Il nostro progetto 'La Fabbrica Smart' ti mostrerà cosa si può fare!",
                    suggestions: ["Dimmi del progetto Fabbrica Smart", "Quali lavori posso fare?"]
                };
            }

            if (msg.includes('meccanic') || msg.includes('motor') || msg.includes('cad') || msg.includes('3d')) {
                return {
                    text: "La Meccanica è la base di ogni industria! Imparerai a progettare con il CAD 3D, a usare le stampanti 3D e a comprendere motori e macchine. Il progetto 'Robo-Arm' è un esempio di ciò che realizzerai!",
                    suggestions: ["Dimmi del progetto Robo-Arm", "Quali lavori posso fare?"]
                };
            }

            if (msg.includes('edilizia') || msg.includes('progettazione') || msg.includes('cad') || msg.includes('3d')) {
                return {
                    text: "L'indirizzo scolastico di riferimento per l'edilizia è il percorso tecnico Costruzioni, Ambiente e Territorio (CAT), l'evoluzione del tradizionale corso per Geometri.",
                    suggestions: ["Quali lavori posso fare?"]
                };
            }


            if (msg.includes('progetto') || msg.includes('open day') || msg.includes('vetrina')) {
                return {
                    text: "I nostri progetti in vetrina per l'Open Day sono: 'La Fabbrica Smart' (nastro trasportatore intelligente), 'Robo-Arm' (braccio robotico) e 'SafeHome' (casa domotica). Sono tutti al Padiglione B!",
                    suggestions: ["Dove sono i laboratori?", "Voglio visitare la scuola"]
                };
            }

            if (msg.includes('iscrizion') || msg.includes('iscriv') || msg.includes('quando')) {
                return {
                    text: "Il modulo per l'iscrizione va consegnato entro il 30 Gennaio. Puoi scaricarlo dal sito della scuola o ritirarlo in segreteria. Vuoi che ti dia il link diretto?",
                    suggestions: ["Sì, dammi il link", "Orari segreteria"]
                };
            }

            if (msg.includes('laborator') || msg.includes('dove') || msg.includes('si trova')) {
                return {
                    text: "I laboratori sono al piano -1: Informatica in Ala Est, Elettronica in Ala Ovest, Meccanica in Ala Sud. Durante l'Open Day puoi visitarli tutti! Vuoi che ti mostri la mappa?",
                    suggestions: ["Sì, mostra la mappa", "Orari laboratori"]
                };
            }

            if (msg.includes('lavoro') || msg.includes('carriera') || msg.includes('futur')) {
                return {
                    text: "Gli sbocchi lavorativi sono tanti! Informatica: sviluppatore e cybersecurity. Elettronica: tecnico e progettista circuiti. Meccanica: CAD e manutenzione industriale. Costruzioni/Edilizia: geometra, progettista CAD, sicurezza cantieri. Il 90% dei nostri diplomati trova lavoro entro 6 mesi!",
                    suggestions: ["Quiz orientamento", "Dimmi di più"]
                };
            }

            if (msg.includes('difficil') || msg.includes('duro') || msg.includes('impegnativo')) {
                return {
                    text: "Non preoccuparti! L'ITIS è stimolante, non difficile. Non stare solo sui libri: farai pratica nei laboratori! Molti studenti che temevano di non farcela hanno scoperto di avere talento per la tecnologia. Vuoi fare un quiz per capire quale indirizzo è più adatto a te?",
                    suggestions: ["Sì, fammi il quiz!", "Dimmi di più"]
                };
            }

            if (msg.includes('ciao') || msg.includes('salve') || msg.includes('buongiorno')) {
                return {
                    text: "Ciao! Sono Sirio, la guida digitale dell’ISISS di Piedimonte Matese. Qui puoi scoprire i nostri indirizzi, i laboratori e i progetti realizzati dagli studenti. Da dove vuoi iniziare?",
                    suggestions: ["Indirizzi di studio", "Progetti open day", "Fai il quiz orientamento"]
                };
            }

            if (msg.includes('grazie') || msg.includes('ottimo') || msg.includes('perfetto')) {
                return {
                    text: "Figurati! Sono qui per aiutarti. Se hai altre domande, non esitare a chiedere. Buona fortuna con il tuo percorso!",
                    suggestions: ["Torna all'inizio"]
                };
            }

            return {
                text: "Non ho capito bene la tua domanda. Puoi chiedermi degli indirizzi di studio (Informatica, Elettronica, Meccanica, Costruzioni/Edilizia), dei progetti in vetrina, delle iscrizioni o dei servizi della scuola. Cosa ti interessa?",
                suggestions: ["Indirizzi di studio", "Progetti", "Iscrizioni", "Quiz orientamento"]
            };
        }

        // ==================== QUIZ SYSTEM ====================
        let currentQuizStep = 0;
        let quizAnswers = [];

        function renderQuizStep() {
            const container = document.getElementById('quiz-content');
            const question = quizQuestions[currentQuizStep];

            container.innerHTML = `
                <div class="mb-4">
                    <div class="flex justify-between items-center mb-4">
                        <span class="text-xs text-gray-500">Domanda ${currentQuizStep + 1} di ${quizQuestions.length}</span>
                        <div class="flex gap-1">
                            ${quizQuestions.map((_, i) => `
                                <div class="w-8 h-1 rounded ${i <= currentQuizStep ? 'bg-cyan-400' : 'bg-gray-700'}"></div>
                            `).join('')}
                        </div>
                    </div>
                    <p class="text-lg font-medium mb-6">${question.domanda}</p>
                    <div class="space-y-3">
                        ${question.opzioni.map((op, i) => `
                            <button onclick="answerQuiz('${op.valore}')" class="w-full text-left px-4 py-3 rounded-xl border border-cyan-500/30 hover:border-cyan-500 hover:bg-cyan-500/10 transition-all text-sm">
                                ${op.testo}
                            </button>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        window.answerQuiz = function (valore) {
            quizAnswers.push(valore);

            if (currentQuizStep < quizQuestions.length - 1) {
                currentQuizStep++;
                renderQuizStep();
            } else {
                showQuizResult();
            }
        };

        function showQuizResult() {
            const counts = {};
            quizAnswers.forEach(a => counts[a] = (counts[a] || 0) + 1);
            const result = Object.keys(counts).reduce((a, b) => counts[a] > counts[b] ? a : b);

            const indirizzo = knowledgeBase.indirizzi[result];
            const container = document.getElementById('quiz-content');

            container.innerHTML = `
                <div class="text-center">
                    <div class="w-16 h-16 rounded-full bg-gradient-to-br from-cyan-400 to-blue-600 mx-auto mb-4 flex items-center justify-center">
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                    </div>
                    <h4 class="font-display text-xl font-bold mb-2" style="color: var(--accent-blue);">Il tuo indirizzo ideale:</h4>
                    <h3 class="font-display text-2xl font-bold mb-4">${indirizzo.nome}</h3>
                    <p class="text-gray-300 text-sm mb-4">${indirizzo.descrizione}</p>
                    <div class="text-left bg-white/5 rounded-xl p-4 mb-6">
                        <p class="text-xs text-gray-500 mb-2">Competenze che acquisirai:</p>
                        <ul class="space-y-1">
                            ${indirizzo.competenze.map(c => `<li class="text-xs text-gray-300 flex items-center gap-2"><span class="w-1.5 h-1.5 bg-cyan-400 rounded-full"></span>${c}</li>`).join('')}
                        </ul>
                    </div>
                    <button onclick="closeQuiz(); scrollToChat(); sendQuickMessage('Voglio sapere di più su ${indirizzo.nome}');" class="btn-primary px-6 py-3 rounded-xl text-sm w-full">
                        Scopri di più su ${indirizzo.nome}
                    </button>
                </div>
            `;
        }

        window.openQuiz = function () {
            currentQuizStep = 0;
            quizAnswers = [];
            document.getElementById('quiz-modal').classList.remove('hidden');
            renderQuizStep();
        };

        window.closeQuiz = function () {
            document.getElementById('quiz-modal').classList.add('hidden');
        };

        // ==================== SERVICE MODAL ====================
        window.showServiceInfo = function (service) {
            const data = knowledgeBase.servizi[service];
            document.getElementById('service-title').textContent = data.titolo;
            document.getElementById('service-content').innerHTML = data.info.map(i => `<p>${i}</p>`).join('');
            document.getElementById('service-modal').classList.remove('hidden');
        };

        window.closeServiceModal = function () {
            document.getElementById('service-modal').classList.add('hidden');
        };

        // ==================== CHAT UI ====================
        window.sendMessage = function (e) {
            e.preventDefault();
            const input = document.getElementById('chat-input');
            const message = input.value.trim();
            if (!message) return;

            addMessage(message, 'user');
            input.value = '';

            setTimeout(() => {
                const response = findBestResponse(message);
                addMessage(response.text, 'assistant', response.suggestions);
            }, 800);
        };

        window.sendQuickMessage = function (message) {
            document.getElementById('chat-input').value = message;
            sendMessage(new Event('submit'));
        };

        function addMessage(text, type, suggestions = null) {
            const container = document.getElementById('chat-messages');
            const isAssistant = type === 'assistant';

            const messageHtml = `
                <div class="chat-message flex gap-3 ${isAssistant ? '' : 'flex-row-reverse'}">
                    ${isAssistant ? `
                        <div class="w-8 h-8 rounded-full bg-gradient-to-br from-cyan-400 to-blue-600 flex-shrink-0 flex items-center justify-center">
                            <span class="font-display font-bold text-xs text-white">S</span>
                        </div>
                    ` : `
                        <div class="w-8 h-8 rounded-full bg-gray-700 flex-shrink-0 flex items-center justify-center">
                            <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                            </svg>
                        </div>
                    `}
                    <div class="flex-1 ${isAssistant ? '' : 'flex justify-end'}">
                        <div class="${isAssistant ? 'bg-cyan-500/10 border-cyan-500/20 rounded-tl-none' : 'bg-gray-700/50 border-gray-600/30 rounded-tr-none'} border rounded-2xl px-4 py-3 max-w-md">
                            <p class="text-sm text-gray-200">${text}</p>
                        </div>
                        ${suggestions ? `
                            <div class="flex flex-wrap gap-2 mt-2">
                                ${suggestions.map(s => `
                                    <button onclick="sendQuickMessage('${s}')" class="text-xs px-3 py-1.5 rounded-full border border-cyan-500/30 text-cyan-400 hover:bg-cyan-500/10 transition-colors">
                                        ${s}
                                    </button>
                                `).join('')}
                            </div>
                        ` : ''}
                    </div>
                </div>
            `;

            container.insertAdjacentHTML('beforeend', messageHtml);
            container.scrollTop = container.scrollHeight;
        }

        window.clearChat = function () {
            const container = document.getElementById('chat-messages');
            container.innerHTML = `
                <div class="chat-message flex gap-3">
                    <div class="w-8 h-8 rounded-full bg-gradient-to-br from-cyan-400 to-blue-600 flex-shrink-0 flex items-center justify-center">
                        <span class="font-display font-bold text-xs text-white">S</span>
                    </div>
                    <div class="flex-1">
                        <div class="bg-cyan-500/10 border border-cyan-500/20 rounded-2xl rounded-tl-none px-4 py-3 max-w-md">
                            <p class="text-sm text-gray-200">Ciao! Sono Sirio, il tuo assistente olografico. Sono qui per aiutarti a scoprire il mondo dell'ITIS! Cosa vorresti sapere?</p>
                        </div>
                        <span class="text-xs text-gray-500 mt-1 block">Ora</span>
                    </div>
                </div>
            `;
        };

        window.scrollToChat = function () {
            document.getElementById('chat').scrollIntoView({ behavior: 'smooth' });
        };

        // ==================== THREE.JS AVATAR ====================
        let scene, camera, renderer, avatar, particles;
        let mouseX = 0, mouseY = 0;

        function initThreeJS() {
            const container = document.getElementById('holo-container');
            const width = container.clientWidth;
            const height = container.clientHeight;

            scene = new THREE.Scene();

            camera = new THREE.PerspectiveCamera(75, width / height, 0.1, 1000);
            camera.position.z = 5;

            renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
            renderer.setSize(width, height);
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
            container.appendChild(renderer.domElement);

            // Core sphere (avatar head)
            const coreGeometry = new THREE.IcosahedronGeometry(1, 3);
            const coreMaterial = new THREE.MeshBasicMaterial({
                color: 0x00d4ff,
                wireframe: true,
                transparent: true,
                opacity: 0.3
            });
            avatar = new THREE.Mesh(coreGeometry, coreMaterial);
            scene.add(avatar);

            // Inner glow sphere
            const innerGeometry = new THREE.IcosahedronGeometry(0.8, 2);
            const innerMaterial = new THREE.MeshBasicMaterial({
                color: 0x00ffff,
                transparent: true,
                opacity: 0.1
            });
            const innerSphere = new THREE.Mesh(innerGeometry, innerMaterial);
            avatar.add(innerSphere);

            // Outer ring
            const ringGeometry = new THREE.TorusGeometry(1.5, 0.02, 16, 100);
            const ringMaterial = new THREE.MeshBasicMaterial({
                color: 0xffd700,
                transparent: true,
                opacity: 0.5
            });
            const ring = new THREE.Mesh(ringGeometry, ringMaterial);
            ring.rotation.x = Math.PI / 2;
            avatar.add(ring);

            // Second ring
            const ring2 = new THREE.Mesh(ringGeometry, ringMaterial.clone());
            ring2.rotation.x = Math.PI / 3;
            ring2.rotation.y = Math.PI / 4;
            avatar.add(ring2);

            // Particles
            const particleCount = 200;
            const particleGeometry = new THREE.BufferGeometry();
            const positions = new Float32Array(particleCount * 3);

            for (let i = 0; i < particleCount * 3; i += 3) {
                const radius = 2 + Math.random() * 2;
                const theta = Math.random() * Math.PI * 2;
                const phi = Math.random() * Math.PI;

                positions[i] = radius * Math.sin(phi) * Math.cos(theta);
                positions[i + 1] = radius * Math.sin(phi) * Math.sin(theta);
                positions[i + 2] = radius * Math.cos(phi);
            }

            particleGeometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));

            const particleMaterial = new THREE.PointsMaterial({
                color: 0x00d4ff,
                size: 0.03,
                transparent: true,
                opacity: 0.6
            });

            particles = new THREE.Points(particleGeometry, particleMaterial);
            scene.add(particles);

            // Mouse movement
            document.addEventListener('mousemove', (e) => {
                mouseX = (e.clientX / window.innerWidth) * 2 - 1;
                mouseY = -(e.clientY / window.innerHeight) * 2 + 1;
            });

            // Resize handler
            window.addEventListener('resize', () => {
                const w = container.clientWidth;
                const h = container.clientHeight;
                camera.aspect = w / h;
                camera.updateProjectionMatrix();
                renderer.setSize(w, h);
            });

            animate();
        }

        function animate() {
            requestAnimationFrame(animate);

            const time = Date.now() * 0.001;

            // Avatar breathing effect
            if (avatar) {
                avatar.rotation.y += 0.005;
                avatar.rotation.x = Math.sin(time * 0.5) * 0.1;
                avatar.scale.setScalar(1 + Math.sin(time * 2) * 0.02);

                // Follow mouse slightly
                avatar.position.x += (mouseX * 0.3 - avatar.position.x) * 0.02;
                avatar.position.y += (mouseY * 0.3 - avatar.position.y) * 0.02;
            }

            // Rotate particles
            if (particles) {
                particles.rotation.y += 0.001;
                particles.rotation.x += 0.0005;
            }

            renderer.render(scene, camera);
        }

        // ==================== PARTICLES BACKGROUND ====================
        function initParticles() {
            const canvas = document.getElementById('particles-bg');
            const ctx = canvas.getContext('2d');

            let width = canvas.width = window.innerWidth;
            let height = canvas.height = window.innerHeight;

            const particleList = [];
            const particleCount = 50;

            for (let i = 0; i < particleCount; i++) {
                particleList.push({
                    x: Math.random() * width,
                    y: Math.random() * height,
                    vx: (Math.random() - 0.5) * 0.3,
                    vy: (Math.random() - 0.5) * 0.3,
                    size: Math.random() * 2 + 1,
                    opacity: Math.random() * 0.5 + 0.1
                });
            }

            function animateParticles() {
                ctx.clearRect(0, 0, width, height);

                particleList.forEach(p => {
                    p.x += p.vx;
                    p.y += p.vy;

                    if (p.x < 0) p.x = width;
                    if (p.x > width) p.x = 0;
                    if (p.y < 0) p.y = height;
                    if (p.y > height) p.y = 0;

                    ctx.beginPath();
                    ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                    ctx.fillStyle = `rgba(0, 212, 255, ${p.opacity})`;
                    ctx.fill();
                });

                // Draw connections
                particleList.forEach((p1, i) => {
                    particleList.slice(i + 1).forEach(p2 => {
                        const dx = p1.x - p2.x;
                        const dy = p1.y - p2.y;
                        const dist = Math.sqrt(dx * dx + dy * dy);

                        if (dist < 150) {
                            ctx.beginPath();
                            ctx.moveTo(p1.x, p1.y);
                            ctx.lineTo(p2.x, p2.y);
                            ctx.strokeStyle = `rgba(0, 212, 255, ${0.1 * (1 - dist / 150)})`;
                            ctx.stroke();
                        }
                    });
                });

                requestAnimationFrame(animateParticles);
            }

            window.addEventListener('resize', () => {
                width = canvas.width = window.innerWidth;
                height = canvas.height = window.innerHeight;
            });

            animateParticles();
        }

        // ==================== SCROLL REVEAL ====================
        function initScrollReveal() {
            const elements = document.querySelectorAll('[data-reveal]');

            const observer = new IntersectionObserver((entries) => {
                entries.forEach((entry, index) => {
                    if (entry.isIntersecting) {
                        setTimeout(() => {
                            entry.target.style.opacity = '1';
                            entry.target.style.transform = 'translateY(0)';
                            entry.target.style.transition = 'all 0.6s cubic-bezier(0.4, 0, 0.2, 1)';
                        }, index * 100);
                    }
                });
            }, { threshold: 0.1 });

            elements.forEach(el => {
                el.style.opacity = '0';
                el.style.transform = 'translateY(30px)';
                observer.observe(el);
            });
        }

        // ==================== INITIALIZE ====================
        document.addEventListener('DOMContentLoaded', () => {
            initThreeJS();
            initParticles();
            initScrollReveal();
        });
    </script>
</body>

</html>